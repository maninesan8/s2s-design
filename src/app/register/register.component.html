<div class="container-fluid d-flex flex-column">
  <form class="col-lg-6 col-md-12" [formGroup]="registerForm" #f="ngForm" (ngSubmit)="registerUser(f.value)">
    <div class="text-danger alert" *ngIf="registerForm.errors">
      {{registerForm.errors.message}}
    </div>

    <div *ngIf="(registered && userType === 'customer'); then registerSuccess else registerContent">

    </div>

    <ng-template #registerSuccess>
      <div class="col-xs-12 text-center reg-msg">Thank you for signing up!</div>
      <div class="col-xs-12"><p>We have sent an email with the username details to sign in into account. Please check
        your email to access the portal.</p></div>
    </ng-template>
    <ng-template #registerContent>
      <div [ngClass]="{'form-group': true, 'form-inline': true, 'has-danger' : firstName.touched && firstName.invalid}">
        <label for="first-name" class="col-md-3">First Name :</label>
        <input type="text" id="first-name" formControlName="firstName" class="form-control form-control-lg col-md-6"
               placeholder="enter first name">
        <div class="form-control-feedback col-md-6 offset-md-3"
             *ngIf="firstName.touched && firstName.invalid && firstName.errors.required">
          First Name is required
        </div>
        <div class="form-control-feedback offset-md-3"
             *ngIf="firstName.touched && firstName.invalid && firstName.errors.pattern">
          First Name should contain only alphabets
        </div>
      </div>

      <div [ngClass]="{'form-group': true, 'form-inline': true,'has-danger' : lastName.touched && lastName.invalid}">
        <label for="last-name" class="col-md-3">Last Name :</label>
        <input type="text" id="last-name" formControlName="lastName" class="form-control form-control-lg col-md-6"
               placeholder="enter last name">
        <div class="form-control-feedback offset-md-3"
             *ngIf="lastName.touched && lastName.invalid && lastName.errors.required">
          First Name is required
        </div>
        <div class="form-control-feedback offset-md-3"
             *ngIf="lastName.touched && lastName.invalid && lastName.errors.pattern">
          First Name should contain only alphabets
        </div>
      </div>

      <div [ngClass]="{'form-group': true,'form-inline': true, 'has-danger' : email.touched && email.invalid}">
        <label for="email" class="col-md-3">Email :</label>
        <input type="email" id="email" formControlName="email" class="form-control form-control-lg col-md-6"
               placeholder="enter email">
        <div class="form-control-feedback offset-md-3" *ngIf="email.touched && email.invalid && email.errors.required">
          Email is required
        </div>
        <div class="form-control-feedback offset-md-3"
             *ngIf="email.touched && email.invalid && email.errors.emailFormat">
          Email is not in valid format
        </div>
      </div>

      <div [ngClass]="{'form-group': true, 'form-inline': true,'has-danger' : password.touched && password.invalid}">
        <label for="password" class="col-md-3">Password :</label>
        <input type="password" id="password" formControlName="password" class="form-control form-control-lg col-md-6"
               placeholder="enter password">
        <div class="form-control-feedback offset-md-3"
             *ngIf="password.touched && password.invalid && password.errors.required">
          Password is required
        </div>
      </div>

      <div
        [ngClass]="{'form-group': true, 'form-inline': true,'has-danger' : confirmPassword.touched && confirmPassword.invalid}">
        <label for="confirm-password" class="col-md-3">Confirm Password :</label>
        <input type="password" id="confirm-password" formControlName="confirmPassword"
               class="form-control form-control-lg col-md-6"
               placeholder="re-enter password">
        <div class="form-control-feedback offset-md-3"
             *ngIf="confirmPassword.touched && confirmPassword.invalid && confirmPassword.errors.required">
          Password is required
        </div>
      </div>

      <div [ngClass]="{'form-group': true, 'form-inline': true,'has-danger' : type.touched && type.invalid}">
        <label for="password" class="col-md-3">Customer Type :</label>
        <select formControlName="type" id="type" class="form-control form-control-lg col-md-6">
          <option value="customer">customer</option>
          <option value="admin">admin</option>
        </select>
      </div>

      <div [ngClass]="{'form-group': true, 'form-inline': true,'has-danger' : company.touched && company.invalid}"
           *ngIf="type.value === 'customer'">
        <label for="company" class="col-md-3">Company :</label>
        <input type="text" id="company" formControlName="company"
               class="form-control form-control-lg col-md-6"
               placeholder="enter company name">
      </div>

      <div class="form-group col-md-4 offset-md-4">
        <button type="submit" class="btn btn-lg form-control-lg btn-primary btn-block" [disabled]="!registerForm.valid">
          Register
        </button>
      </div>
    </ng-template>
  </form>
</div>
